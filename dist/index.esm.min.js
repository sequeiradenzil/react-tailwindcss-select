import e,{useEffect as t,createContext as l,useMemo as a,useContext as r,useCallback as n,useState as o,useRef as s}from"react";const c=()=>e.createElement("svg",{className:"animate-spin mr-0.5 h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),i=({className:t=""})=>e.createElement("svg",{className:t,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})),m=({className:t=""})=>e.createElement("svg",{className:t,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})),u=({className:t=""})=>e.createElement("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"}));const d=({placeholder:t="",value:l="",onChange:a,name:r=""})=>e.createElement("div",{className:"relative py-1 px-2.5"},e.createElement(u,{className:"absolute w-5 h-5 mt-2.5 pb-0.5 ml-2 text-gray-500"}),e.createElement("input",{className:"w-full py-2 pl-8 text-sm text-gray-500 bg-gray-100 border border-gray-200 rounded focus:border-gray-200 focus:ring-0 focus:outline-none",type:"text",placeholder:t,value:l,onChange:a,name:r})),p=({children:t})=>e.createElement("div",{className:"px-2 py-2 cursor-not-allowed truncate text-gray-400 select-none"},t),g=l({value:null,handleValueChange:e=>{}}),v=({value:t,handleValueChange:l,children:r})=>{const n=a((()=>({value:t,handleValueChange:l})),[l,t]);return e.createElement(g.Provider,{value:n},r)},h=({item:t})=>{const{value:l,handleValueChange:n}=r(g),o=a((()=>null!==l&&!Array.isArray(l)&&l.value===t.value),[t.value,l]);return e.createElement(e.Fragment,null,t.disabled?e.createElement(p,null,t.label):e.createElement("li",{"aria-selected":o,role:"option",onClick:()=>n(t),className:"block transition duration-200 px-2 py-2 cursor-pointer select-none truncate rounded "+(o?"text-white bg-blue-500":"text-gray-500 hover:bg-blue-100 hover:text-blue-500")},t.label))},E=({item:t})=>e.createElement(e.Fragment,null,t.options.length>0&&e.createElement(e.Fragment,null,e.createElement("div",{className:"pr-2 py-2 cursor-default select-none truncate font-bold text-gray-700"},t.label),t.options.map(((t,l)=>e.createElement(h,{key:l,item:t}))))),x=({list:t,noOptionsMessage:l,text:r,isMultiple:o,value:s})=>{const c=n((()=>{const e=e=>e.label.toLowerCase().indexOf(r.toLowerCase())>-1;let l=t.map((t=>"options"in t?{label:t.label,options:t.options.filter(e)}:t));return l=l.filter((t=>"options"in t?t.options.length>0:e(t))),l}),[r,t]),i=n((e=>{if(!o)return e;if(Array.isArray(s)){const t=s.map((e=>e.value)),l=e=>!t.includes(e.value);let a=e.map((e=>"options"in e?{label:e.label,options:e.options.filter(l)}:e));return a=a.filter((e=>"options"in e?e.options.length>0:l(e))),a}return e}),[o,s]);let m=a((()=>i(c())),[c,i]);return e.createElement("div",{role:"options",className:"max-h-72 overflow-y-auto overflow-y-scroll"},m.map(((t,l)=>e.createElement(e.Fragment,{key:l},"options"in t?e.createElement(e.Fragment,null,e.createElement("div",{className:"px-2.5"},e.createElement(E,{item:t})),l+1<m.length&&e.createElement("hr",{className:"my-1"})):e.createElement("div",{className:"px-2.5"},e.createElement(h,{item:t}))))),0===m.length&&e.createElement(p,null,l))},y=({options:l=[],value:a=null,onChange:r,placeholder:u="Select...",searchInputPlaceholder:p="Search...",isMultiple:g=!1,isClearable:h=!1,isSearchable:E=!1,isDisabled:y=!1,loading:b=!1,menuIsOpen:f=!1,noOptionsMessage:w="No options found"})=>{const[N,C]=o(f),[k,A]=o(l),[L,M]=o(""),z=s(null);t((()=>{const e=e=>"disabled"in e?e:{...e,disabled:!1};A(l.map((t=>"options"in t?{label:t.label,options:t.options.map(e)}:e(t))))}),[l]);const F=n((()=>{y||C(!N)}),[y,N]),V=n((()=>{N&&C(!1)}),[N]);!function(e,l){t((()=>{const t=t=>{e.current&&!e.current.contains(t.target)&&l(t)};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}}),[e,l])}(z,(()=>{V()}));const O=n((e=>{e.preventDefault(),"Enter"!==e.code&&"Space"!==e.code||y||F()}),[y,F]),B=n((e=>{e!==a&&(g||Array.isArray(a)||(V(),r(e)),g&&(Array.isArray(a)||null===a)&&r(null===a?[e]:[...a,e]))}),[V,g,r,a]),I=n((e=>{e.stopPropagation(),r(null)}),[r]),P=n(((e,t)=>{if(g&&Array.isArray(a)&&a.length){e.stopPropagation();const l=a.filter((e=>t.value!==e.value));r(l.length?l:null)}}),[g,r,a]);return e.createElement(v,{value:a,handleValueChange:B},e.createElement("div",{className:"relative w-full",ref:z},e.createElement("div",{tabIndex:0,"aria-expanded":N,onKeyDown:O,onClick:F,className:"flex text-sm text-gray-500 border border-gray-300 rounded shadow-sm transition duration-300 focus:outline-none"+(y?" bg-gray-200":" bg-white hover:border-gray-400 focus:ring-2 focus:ring-blue-500")},e.createElement("div",{className:"grow pl-2.5 py-2 pr-2 flex flex-wrap gap-1"},g?e.createElement(e.Fragment,null,null===a&&u,Array.isArray(a)&&a.map(((t,l)=>e.createElement("div",{className:"bg-gray-200 border rounded-sm flex space-x-1"+(y?" border-gray-500 px-1":" pl-1"),key:l},e.createElement("p",{className:"text-gray-600 truncate cursor-default select-none"},t.label),!y&&e.createElement("div",{onClick:e=>P(e,t),className:"flex items-center px-1 cursor-pointer rounded-r-sm hover:bg-red-200 hover:text-red-600"},e.createElement(i,{className:"w-3 h-3 mt-0.5"})))))):e.createElement("p",{className:"truncate cursor-default select-none"},a&&!Array.isArray(a)?a.label:u)),e.createElement("div",{className:"flex flex-none items-center py-1.5"},b&&e.createElement("div",{className:"px-1.5"},e.createElement(c,null)),h&&!y&&null!==a&&e.createElement("div",{className:"px-1.5 cursor-pointer",onClick:I},e.createElement(i,{className:"w-5 h-5 p-0.5"})),e.createElement("div",{className:"h-full"},e.createElement("span",{className:"w-px h-full inline-block text-white bg-gray-300 text-opacity-0"})),e.createElement("div",{className:"px-1.5"},e.createElement(m,{className:"transition duration-300 w-6 h-6 p-0.5"+(N?" transform rotate-90 text-gray-500":" text-gray-300")})))),N&&!y&&e.createElement("div",{tabIndex:-1,className:"absolute z-100 w-full bg-white shadow-lg border rounded py-1 mt-1.5 text-sm text-gray-700"},E&&e.createElement(d,{value:L,placeholder:p,onChange:e=>M(e.target.value)}),e.createElement(x,{list:k,noOptionsMessage:w,text:L,isMultiple:g,value:a}))))};export{y as default};
