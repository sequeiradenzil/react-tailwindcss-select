import e,{useEffect as t,createContext as l,useMemo as n,useContext as a,useCallback as r,useState as o,useRef as s}from"react";const i=()=>e.createElement("svg",{className:"animate-spin mr-0.5 h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),c=({className:t=""})=>e.createElement("svg",{className:t,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"}));const u=({children:t})=>e.createElement("div",{className:"px-2 py-2 cursor-not-allowed truncate text-gray-400 select-none"},t),m=l({value:null,handleValueChange:e=>{}}),d=({value:t,handleValueChange:l,children:a})=>{const r=n((()=>({value:t,handleValueChange:l})),[l,t]);return e.createElement(m.Provider,{value:r},a)},p=({item:t})=>{const{value:l,handleValueChange:r}=a(m),o=n((()=>null!==l&&!Array.isArray(l)&&l.value===t.value),[t.value,l]);return e.createElement(e.Fragment,null,t.disabled?e.createElement(u,null,t.label):e.createElement("li",{"aria-selected":o,role:"option",onClick:()=>r(t),className:"block transition duration-200 px-2 py-2 cursor-pointer select-none truncate rounded "+(o?"text-white bg-blue-500":"text-gray-500 hover:bg-blue-100 hover:text-blue-500")},t.label))},g=({item:t})=>e.createElement(e.Fragment,null,t.options.length>0&&e.createElement(e.Fragment,null,e.createElement("div",{className:"pr-2 py-2 cursor-default select-none truncate font-bold text-gray-700"},t.label),t.options.map(((t,l)=>e.createElement(p,{key:l,item:t}))))),h=({list:t,noOptionsMessage:l,text:a,isMultiple:o,value:s})=>{const i=r((()=>{const e=e=>e.label.toLowerCase().indexOf(a.toLowerCase())>-1;let l=t.map((t=>"options"in t?{label:t.label,options:t.options.filter(e)}:t));return l=l.filter((t=>"options"in t?t.options.length>0:e(t))),l}),[a,t]),c=r((e=>{if(!o)return e;if(Array.isArray(s)){const t=s.map((e=>e.value)),l=e=>!t.includes(e.value);let n=e.map((e=>"options"in e?{label:e.label,options:e.options.filter(l)}:e));return n=n.filter((e=>"options"in e?e.options.length>0:l(e))),n}return e}),[o,s]);let m=n((()=>c(i())),[i,c]);return e.createElement("div",{role:"options",className:"max-h-72 overflow-y-auto overflow-y-scroll"},m.map(((t,l)=>e.createElement(e.Fragment,{key:l},"options"in t?e.createElement(e.Fragment,null,e.createElement("div",{className:"px-2.5"},e.createElement(g,{item:t})),l+1<m.length&&e.createElement("hr",{className:"my-1"})):e.createElement("div",{className:"px-2.5"},e.createElement(p,{item:t}))))),0===m.length&&e.createElement(u,null,l))},v=({options:l=[],value:n=null,onChange:a,placeholder:u="Select...",searchInputPlaceholder:m="Search...",isMultiple:p=!1,isClearable:g=!1,isSearchable:v=!1,isDisabled:f=!1,loading:x=!1,menuIsOpen:E=!1,enableInput:b=!1,noOptionsMessage:y="No options found"})=>{const[w,N]=o(E),[C,k]=o(l),[A,L]=o(""),M=s(null);t((()=>{const e=e=>"disabled"in e?e:{...e,disabled:!1};k(l.map((t=>"options"in t?{label:t.label,options:t.options.map(e)}:e(t))))}),[l]);const I=r((()=>{f||N(!w)}),[f,w]),F=r((()=>{w&&N(!1)}),[w]);!function(e,l){t((()=>{const t=t=>{e.current&&!e.current.contains(t.target)&&l(t)};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}}),[e,l])}(M,(()=>{F()})),r((e=>{e.preventDefault(),"Enter"!==e.code&&"Space"!==e.code||f||I()}),[f,I]);const V=r((e=>{e!==n&&function(){p||Array.isArray(n)||(F(),a(e)),p&&(Array.isArray(n)||null===n)&&(document.getElementById("filterdiv"),a(null===n?[e]:[...n,e]));const t=document.getElementById("filterdiv");if(null!==e.label&&null!==t){const l=document.createElement("span");l.className=" p-5 border shadow mr-5 inline-flex items-center rounded-full bg-gray-50 py-2 pl-2.5 pr-1 text-sm font-medium";const a=document.createElement("button");a.addEventListener("click",(function(t){t.stopPropagation(),B(e),console.log("I am clicked",e),console.log(n),a?.parentElement?.remove(),B(e)})),a.className="ml-0.5 inline-flex h-4 w-4 flex-shrink-0 items-center justify-center rounded-full text-indigo-400 hover:bg-indigo-200 hover:text-indigo-500 focus:bg-indigo-500 focus:text-white focus:outline-none",a.innerHTML='<span class="sr-only">Remove large option</span>\n                        <svg class="h-2 w-2" stroke="currentColor" fill="none" viewBox="0 0 8 8">\n                          <path strokeLinecap="round" strokeWidth="1.5" d="M1 1l6 6m0-6L1 7"/> \n                        </svg>',l.innerText=e.label,l.appendChild(a),t.appendChild(l)}}()}),[F,p,a,n]);r((e=>{e.stopPropagation(),a(null)}),[a]);const B=r((e=>{if(p&&Array.isArray(n)&&n.length){const t=n.filter((t=>e.value!==t.value));a(t.length?t:null)}}),[p,a,n]);return e.createElement(d,{value:n,handleValueChange:V},e.createElement("div",{className:"relative w-full",ref:M},e.createElement("div",{tabIndex:0,"aria-expanded":w,onClick:I,className:"flex text-sm text-gray-500 border border-gray-300 rounded shadow-sm transition duration-300 focus:outline-none"+(f?" bg-gray-200":" bg-white hover:border-gray-400 focus:ring-2 focus:ring-blue-500")},e.createElement("input",{className:"grow pl-2.5 py-2 pr-2 flex flex-wrap gap-1",type:"text",value:A,onChange:e=>L(e.target.value),placeholder:u}),e.createElement("div",{className:"flex flex-none items-center py-1.5"},x&&e.createElement("div",{className:"px-1.5"},e.createElement(i,null)),e.createElement("div",{className:"h-full"},e.createElement("span",{className:"w-px h-full inline-block text-white bg-gray-300 text-opacity-0"})),b?e.createElement("div",{className:"absolute flex items-center inset-y-0 right-0"},e.createElement(c,{className:"transition duration-300 w-4 h-4 p-0.5"+(w?" transform rotate-90 text-gray-500":" text-gray-300")})):e.createElement(e.Fragment,null))),w&&!f&&e.createElement("div",{tabIndex:-1,className:" absolute z-[100] w-full bg-white shadow-lg border rounded py-1 mt-1.5 text-sm text-gray-700"},e.createElement(h,{list:C,noOptionsMessage:y,text:A,isMultiple:p,value:n}))))};export{v as default};
